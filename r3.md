# Resumen R3 - David Umaña Blanco 2016175133

 <font size="2"> 

### 5.6.4 OSPF—Protocolos de Enrutamiento de Puerta de Enlace Interior 

El protocolo de puerta de enlace interior original de Internet era un protocolo de vector de distancia (RIP) basado en el algoritmo de Bellman-Ford heredado de ARPANET. Funcionó bien en sistemas pequeños, pero no así conforme los sistemas autónomos fueron más grandes. También padeció el problema de la cuenta hasta el infinito y la convergencia generalmente lenta, por lo que se reemplazó por OSPF (Abrir Primero la Ruta más Corta), se volvió una norma en 1990. Ahora se ha convertido en el protocolo de puerta de enlace interior principal. OSPF soporta tres tipos de conexiones y redes: 1- Las líneas punto a punto exactamente entre dos enrutadores. 2- Redes de multiacceso con difusión (por ejemplo, la mayoría de las LANs). 3- Redes de multiacceso sin difusión (por ejemplo, la mayoría de las WANs de paquetes conmutados).

Una red de multiacceso es la que puede tener múltiples enrutadores, cada uno de los cuales se puede comunicar directamente con todos los demás. Todas las LANs y WANs tienen esta propiedad. OSPF funciona resumiendo la colección de redes reales, enrutadores y líneas en un grafo dirigido en el que a cada arco se asigna un costo (distancia, retardo, etcétera). Entonces calcula la ruta más corta con base en los pesos de los arcos. Una conexión en serie entre dos enrutadores se representa por un par de arcos, uno en cada dirección. Sus pesos pueden ser diferentes. Una red de multiacceso se representa con un nodo para la red en sí más un nodo para cada enrutador. Los arcos del nodo de la red a los enrutadores tienen peso 0 y se omiten del grafo. Lo que OSPF hace fundamentalmente es representar la red real como un grafo y entonces calcular el camino más corto de uno a otro enrutador.

OSPF les permite a muchos de los sistemas autónomos en Internet dividirlos en áreas numeradas donde un área es una red o un conjunto de redes inmediatas. Las áreas no se traslapan, algunos enrutadores no pueden pertenecer a área alguna. Un área es una generalización de una subred. Fuera de un área, su topología y detalles no son visibles. Cada sistema autónomo tiene un área de red dorsal, llamada 0. Todas las áreas se conectan a la red dorsal, posiblemente por túneles, de modo que es posible entrar desde cualquier área en el sistema autónomo a cualquier otra área en el sistema autónomo mediante la red dorsal. En el grafo un túnel se representa como un arco y tiene un costo. Cada enrutador que se conecta a dos o más áreas es parte de la red dorsal y no es visible fuera de ésta. 

Dentro de un área, cada enrutador tiene la misma base de datos del estado del enlace y ejecuta el mismo algoritmo de la ruta más corta. Su trabajo principal es calcular el camino más corto desde sí mismo a cualquier otro enrutador en el área, incluso el enrutador que se conecta a la red dorsal, de la que debe haber una por lo menos. Un enrutador que conecta dos áreas necesita las bases de datos para las dos áreas y debe ejecutar el algoritmo de la ruta más corta por separado. Durante la operación normal, pueden necesitarse tres tipos de rutas: dentro del área, entre áreas y entre sistemas autónomos. OSPF distingue cuatro clases de enrutadores: 1- Enrutadores internos que están totalmente dentro de un área. 2- Enrutadores de límite de área que conectan dos o más áreas. 3- Enrutadores de la red dorsal que están en la red dorsal. 4- Enrutadores fronterizos de sistemas autónomos que se comunican con los enrutadores de otros sistemas autónomos.

OSPF trabaja intercambiando información entre enrutadores adyacentes, que no es lo mismo que entre enrutadores vecinos. En particular, es ineficaz tener cualquier enrutador en la LAN que se comunica con cualquier otro enrutador en la LAN. Para evitar eso, se elige un enrutador como enrutador designado. Se dice que es adyacente a todos los demás enrutadores en su LAN, e intercambia información con ellos. Los enrutadores vecinos que no son adyacentes no intercambian información entre sí. Un enrutador designado como respaldo siempre se guarda actualizado, para facilitar la transición en caso de que el primer enrutador designado se cayera y necesitara ser reemplazado de manera inmediata.

Los 5 tipos de mensahes de OSPF: Hello - Descubre quiénes son los vecinos. Link state update - Proporciona los costos del emisor a sus vecinos. Link state ack - Confirma la recepción de la actualización del estado del enlace. Database description - Anuncia qué actualizaciones tiene el emisor. Link state request - Solicita información del socio.

Finalmente podemos reunir todas las piezas. Utilizando la inundación de mensajes, cada enrutador informa a todos los demás enrutadores en su área sobre sus vecinos y costos. Esta información permite a cada enrutador construir el grafo para su(s) área(s) y calcular la ruta más corta. El área de la red dorsal también hace esto. Además, los enrutadores de la red dorsal aceptan la información de los enrutadores del límite de área para calcular la mejor ruta de cada enrutador de la red dorsal a cada enrutador restante. Esta información se difunde a los enrutadores de límite de área que la anuncian dentro de sus áreas. Usando esta información, un enrutador que está a punto de enviar un paquete dentro del área puede seleccionar el enrutador de mejor salida a la red dorsal.


### 5.6.5 BGP—Protocolo de Puerta de Enlace de Frontera

Protocolo de Puerta de Enlace de Frontera (BGP), es un protocolo diferente a OSPF, se usa entre sistemas autónomos porque los objetivos entre estos protocolos no son los mismos. Los enrutadores del protocolo de puerta de enlace exterior tienen que preocuparse en gran manera por la política (Metz, 2001). Los protocolos de puerta de enlace exterior, y BGP, se han diseñado para permitir que se implementen muchos tipos de políticas de enrutamiento en el tráfico entre sistemas autónomos.

Las políticas implican consideraciones políticas, de seguridad, o económicas. Algunos ejemplos de limitaciones de enrutamiento son: 1- Ningún tránsito a través de ciertos sistemas autónomos. 2- Nunca ponga Irak en una ruta que inicie en el Pentágono. 3- No pasar por Estados Unidos para llegar de la Columbia Británica a Ontario. 4- Transite por Albania sólo si no hay otra alternativa al destino. 5- El tráfico que empieza o termina en IBM no debe transitar por Microsoft.

Las políticas en cada enrutador de BGP se configuran manualmente, no son parte del protocolo. Un enrutador de BGP consiste en sistemas autónomos y las líneas que los conectan. Dos sistemas autónomos se consideran conectados si hay una línea entre un enrutador fronterizo en cada uno. Dado el especial interés de BGP en el transporte de tráfico, las redes se agrupan en una de tres categorías. La primera son las redes stub, que tienen sólo una conexión con el grafo de BGP. Éstas no se pueden usar para transportar tráfico porque no hay nadie en el otro lado. Luego vienen las redes multiconectadas. Éstas podrían usarse para el transporte de tráfico excepto que lo rechacen. Finalmente, están las redes de tránsito, como redes dorsales, que están dispuestas a ocuparse de paquetes de terceros, posiblemente con algunas restricciones, y normalmente por pago. Los pares de enrutadores de BGP se comunican entre sí estableciendo conexiones TCP.

Básicamente BGP es muy parecido a un protocolo de vector de distancia, pero muy diferente de la mayoría de otros como RIP. En lugar de mantener el costo para cada destino, cada enrutador de BGP guarda el registro de la ruta utilizada, por lo que se conoce como un protocolo de vector de ruta. Del mismo modo, en lugar de darle a cada vecino el costo de cada posible destino estimado periódicamente, cada enrutador de BGP les dice el camino exacto que está usando. BGP resuelve fácilmente el problema de la cuenta hasta el infinito que plaga otros algoritmos de vector de distancia.


 </font> 
